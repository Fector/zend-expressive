<!DOCTYPE html>
<html lang="en">


<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="zend-expressive: PSR-7 Middleware Microframework">  
    <link rel="shortcut icon" href="../../../../img/favicon.ico">

    <title>Container configuration - Expressive</title>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="../../../../css/styles-288837cc22.css">
        <link href="../../../../css/zend-expressive.css" rel="stylesheet">

    
</head>

<body>

    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <span class="navbar-brand">
                <a class="logo-link" href="https://framework.zend.com/" data-toggle="tooltip" data-placement="bottom" title="Go to the ZF homepage"><img src="../../../../img/zf-logo-mark.svg" height="28" alt="Zend Framework" /></a>
                <a href="../../../..">Expressive</a>
            </span>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                
                    <li >
                        <a href="../../../..">Home</a>
                    </li>
                
                
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Getting Started <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            

<li >
    <a href="../../../getting-started/features/">Overview and Features</a>
</li>


                        
                            

<li >
    <a href="../../../getting-started/quick-start/">Quick Start</a>
</li>


                        
                        </ul>
                    </li>
                
                
                
                
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Features <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            

<li >
    <a href="../../middleware-types/">Middleware Types</a>
</li>


                        
                            

<li >
    <a href="../../application/">Applications</a>
</li>


                        
                            

  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Containers</a>
    <ul class="dropdown-menu">
        
            

<li >
    <a href="../intro/">Introduction</a>
</li>


        
            

<li >
    <a href="../factories/">Container Factories</a>
</li>


        
            

<li >
    <a href="../delegator-factories/">Delegator Factories</a>
</li>


        
            

<li >
    <a href="../middleware-container/">The Middleware Container</a>
</li>


        
            

<li >
    <a href="../middleware-factory/">The Middleware Factory</a>
</li>


        
            

<li >
    <a href="../zend-servicemanager/">Using zend-servicemanager</a>
</li>


        
            

<li >
    <a href="../pimple/">Using Pimple</a>
</li>


        
            

<li >
    <a href="../aura-di/">Using Aura.Di</a>
</li>


        
            

<li class="active">
    <a href="./">Container configuration</a>
</li>


        
    </ul>
  </li>


                        
                            

  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Routing Adapters</a>
    <ul class="dropdown-menu">
        
            

<li >
    <a href="../../router/intro/">Introduction</a>
</li>


        
            

<li >
    <a href="../../router/interface/">Routing Interface</a>
</li>


        
            

<li >
    <a href="../../router/route-collector/">The Route Collector</a>
</li>


        
            

<li >
    <a href="../../router/uri-generation/">URI Generation</a>
</li>


        
            

<li >
    <a href="../../router/piping/">Routing vs Piping</a>
</li>


        
            

<li >
    <a href="../../router/aura/">Using Aura</a>
</li>


        
            

<li >
    <a href="../../router/fast-route/">Using FastRoute</a>
</li>


        
            

<li >
    <a href="../../router/zf2/">Using zend-router</a>
</li>


        
    </ul>
  </li>


                        
                            

  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Templating</a>
    <ul class="dropdown-menu">
        
            

<li >
    <a href="../../template/intro/">Introduction</a>
</li>


        
            

<li >
    <a href="../../template/interface/">Template Renderer Interface</a>
</li>


        
            

<li >
    <a href="../../template/request-handlers/">Templated Request Handlers</a>
</li>


        
            

<li >
    <a href="../../template/plates/">Using Plates</a>
</li>


        
            

<li >
    <a href="../../template/twig/">Using Twig</a>
</li>


        
            

<li >
    <a href="../../template/zend-view/">Using zend-view</a>
</li>


        
    </ul>
  </li>


                        
                            

<li >
    <a href="../../error-handling/">Error Handling</a>
</li>


                        
                            

<li >
    <a href="../../modular-applications/">Modular Applications</a>
</li>


                        
                            

  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Middleware</a>
    <ul class="dropdown-menu">
        
            

<li >
    <a href="../../middleware/routing-and-dispatch-middleware/">Routing and Dispatch Middleware</a>
</li>


        
            

<li >
    <a href="../../middleware/implicit-methods-middleware/">Implicit HEAD and OPTIONS Middleware</a>
</li>


        
            

<li >
    <a href="../../middleware/method-not-allowed-middleware/">Returning Method Not Allowed</a>
</li>


        
    </ul>
  </li>


                        
                            

  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Helpers</a>
    <ul class="dropdown-menu">
        
            

<li >
    <a href="../../helpers/intro/">Introduction</a>
</li>


        
            

<li >
    <a href="../../helpers/url-helper/">UrlHelper</a>
</li>


        
            

<li >
    <a href="../../helpers/server-url-helper/">ServerUrlHelper</a>
</li>


        
            

<li >
    <a href="../../helpers/body-parse/">Body Parsing Middleware</a>
</li>


        
            

<li >
    <a href="../../helpers/content-length/">Content-Length Middleware</a>
</li>


        
    </ul>
  </li>


                        
                            

<li >
    <a href="../../emitters/">Emitters</a>
</li>


                        
                        </ul>
                    </li>
                
                
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Cookbook <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            

<li >
    <a href="../../../cookbook/autowiring-routes-and-pipelines/">Autowiring routes and pipeline middleware</a>
</li>


                        
                            

<li >
    <a href="../../../cookbook/using-a-base-path/">Using Expressive from a subdirectory</a>
</li>


                        
                            

<li >
    <a href="../../../cookbook/common-prefix-for-routes/">Prepending a common path to all routes</a>
</li>


                        
                            

<li >
    <a href="../../../cookbook/passing-data-between-middleware/">Passing data between middleware</a>
</li>


                        
                            

<li >
    <a href="../../../cookbook/route-specific-pipeline/">Route-specific middleware pipelines</a>
</li>


                        
                            

<li >
    <a href="../../../cookbook/host-segregated-middleware/">Segregating middleware by host</a>
</li>


                        
                            

<li >
    <a href="../../../cookbook/double-pass-middleware/">Using double-pass middleware</a>
</li>


                        
                            

<li >
    <a href="../../../cookbook/setting-locale-depending-routing-parameter/">Setting a locale based on a routing parameter</a>
</li>


                        
                            

<li >
    <a href="../../../cookbook/setting-locale-without-routing-parameter/">Setting a locale without a routing parameter</a>
</li>


                        
                            

<li >
    <a href="../../../cookbook/debug-toolbars/">Enabling debug toolbars</a>
</li>


                        
                            

<li >
    <a href="../../../cookbook/flash-messengers/">Flash Messengers</a>
</li>


                        
                            

<li >
    <a href="../../../cookbook/using-custom-view-helpers/">Registering custom view helpers when using zend-view</a>
</li>


                        
                            

<li >
    <a href="../../../cookbook/using-zend-form-view-helpers/">Using zend-form view helpers</a>
</li>


                        
                        </ul>
                    </li>
                
                
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Reference <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            

<li >
    <a href="../../../why-expressive/">Why choose Expressive?</a>
</li>


                        
                            

<li >
    <a href="../../../reference/cli-tooling/">CLI Tooling</a>
</li>


                        
                            

<li >
    <a href="../../../reference/expressive-projects/">Expressive Projects</a>
</li>


                        
                            

<li >
    <a href="../../../reference/migration/">Migration</a>
</li>


                        
                        </ul>
                    </li>
                
                
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">v2 <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            

<li >
    <a href="../../../../v2/">Home</a>
</li>


                        
                            

  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Getting Started</a>
    <ul class="dropdown-menu">
        
            

<li >
    <a href="../../../../v2/getting-started/features/">Overview and Features</a>
</li>


        
            

<li >
    <a href="../../../../v2/getting-started/standalone/">Quick Start: Standalone</a>
</li>


        
            

<li >
    <a href="../../../../v2/getting-started/skeleton/">Quick Start: Skeleton Installer</a>
</li>


        
    </ul>
  </li>


                        
                            

  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Features</a>
    <ul class="dropdown-menu">
        
            

<li >
    <a href="../../../../v2/features/middleware-types/">Middleware Types</a>
</li>


        
            

<li >
    <a href="../../../../v2/features/application/">Applications</a>
</li>


        
            

  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Containers</a>
    <ul class="dropdown-menu">
        
            

<li >
    <a href="../../../../v2/features/container/intro/">Introduction</a>
</li>


        
            

<li >
    <a href="../../../../v2/features/container/factories/">Container Factories</a>
</li>


        
            

<li >
    <a href="../../../../v2/features/container/delegator-factories/">Delegator Factories</a>
</li>


        
            

<li >
    <a href="../../../../v2/features/container/zend-servicemanager/">Using zend-servicemanager</a>
</li>


        
            

<li >
    <a href="../../../../v2/features/container/pimple/">Using Pimple</a>
</li>


        
            

<li >
    <a href="../../../../v2/features/container/aura-di/">Using Aura.Di</a>
</li>


        
    </ul>
  </li>


        
            

  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Routing Adapters</a>
    <ul class="dropdown-menu">
        
            

<li >
    <a href="../../../../v2/features/router/intro/">Introduction</a>
</li>


        
            

<li >
    <a href="../../../../v2/features/router/interface/">Routing Interface</a>
</li>


        
            

<li >
    <a href="../../../../v2/features/router/uri-generation/">URI Generation</a>
</li>


        
            

<li >
    <a href="../../../../v2/features/router/piping/">Routing vs Piping</a>
</li>


        
            

<li >
    <a href="../../../../v2/features/router/aura/">Using Aura</a>
</li>


        
            

<li >
    <a href="../../../../v2/features/router/fast-route/">Using FastRoute</a>
</li>


        
            

<li >
    <a href="../../../../v2/features/router/zf2/">Using the ZF2 Router</a>
</li>


        
    </ul>
  </li>


        
            

  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Templating</a>
    <ul class="dropdown-menu">
        
            

<li >
    <a href="../../../../v2/features/template/intro/">Introduction</a>
</li>


        
            

<li >
    <a href="../../../../v2/features/template/interface/">Template Renderer Interface</a>
</li>


        
            

<li >
    <a href="../../../../v2/features/template/middleware/">Templated Middleware</a>
</li>


        
            

<li >
    <a href="../../../../v2/features/template/plates/">Using Plates</a>
</li>


        
            

<li >
    <a href="../../../../v2/features/template/twig/">Using Twig</a>
</li>


        
            

<li >
    <a href="../../../../v2/features/template/zend-view/">Using zend-view</a>
</li>


        
    </ul>
  </li>


        
            

<li >
    <a href="../../../../v2/features/error-handling/">Error Handling</a>
</li>


        
            

<li >
    <a href="../../../../v2/features/modular-applications/">Modular Applications</a>
</li>


        
            

  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Middleware</a>
    <ul class="dropdown-menu">
        
            

<li >
    <a href="../../../../v2/features/middleware/implicit-methods-middleware/">Implicit HEAD and OPTIONS Middleware</a>
</li>


        
    </ul>
  </li>


        
            

  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Helpers</a>
    <ul class="dropdown-menu">
        
            

<li >
    <a href="../../../../v2/features/helpers/intro/">Introduction</a>
</li>


        
            

<li >
    <a href="../../../../v2/features/helpers/url-helper/">UrlHelper</a>
</li>


        
            

<li >
    <a href="../../../../v2/features/helpers/server-url-helper/">ServerUrlHelper</a>
</li>


        
            

<li >
    <a href="../../../../v2/features/helpers/body-parse/">Body Parsing Middleware</a>
</li>


        
            

<li >
    <a href="../../../../v2/features/helpers/content-length/">Content-Length Middleware</a>
</li>


        
    </ul>
  </li>


        
            

<li >
    <a href="../../../../v2/features/emitters/">Emitters</a>
</li>


        
    </ul>
  </li>


                        
                            

  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Cookbook</a>
    <ul class="dropdown-menu">
        
            

<li >
    <a href="../../../../v2/cookbook/autowiring-routes-and-pipelines/">Autowiring routes and pipeline middleware</a>
</li>


        
            

<li >
    <a href="../../../../v2/cookbook/common-prefix-for-routes/">Prepending a common path to all routes</a>
</li>


        
            

<li >
    <a href="../../../../v2/cookbook/route-specific-pipeline/">Route-specific middleware pipelines</a>
</li>


        
            

<li >
    <a href="../../../../v2/cookbook/using-custom-view-helpers/">Registering custom view helpers when using zend-view</a>
</li>


        
            

<li >
    <a href="../../../../v2/cookbook/using-zend-form-view-helpers/">Using zend-form view helpers</a>
</li>


        
            

<li >
    <a href="../../../../v2/cookbook/using-a-base-path/">Using Expressive from a subdirectory</a>
</li>


        
            

<li >
    <a href="../../../../v2/cookbook/setting-locale-depending-routing-parameter/">Setting a locale based on a routing parameter</a>
</li>


        
            

<li >
    <a href="../../../../v2/cookbook/setting-locale-without-routing-parameter/">Setting a locale without a routing parameter</a>
</li>


        
            

<li >
    <a href="../../../../v2/cookbook/debug-toolbars/">Enabling debug toolbars</a>
</li>


        
            

<li >
    <a href="../../../../v2/cookbook/using-routed-middleware-class-as-controller/">Handling multiple routes in a single class</a>
</li>


        
            

<li >
    <a href="../../../../v2/cookbook/flash-messengers/">Flash Messengers</a>
</li>


        
            

<li >
    <a href="../../../../v2/cookbook/passing-data-between-middleware/">Passing data between middleware</a>
</li>


        
    </ul>
  </li>


                        
                            

  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Reference</a>
    <ul class="dropdown-menu">
        
            

<li >
    <a href="../../../../v2/why-expressive/">Why choose Expressive?</a>
</li>


        
            

<li >
    <a href="../../../../v2/reference/cli-tooling/">CLI Tooling</a>
</li>


        
            

<li >
    <a href="../../../../v2/reference/usage-examples/">Examples</a>
</li>


        
            

<li >
    <a href="../../../../v2/reference/expressive-projects/">Expressive Projects</a>
</li>


        
            

<li >
    <a href="../../../../v2/reference/migration/">Migration</a>
</li>


        
    </ul>
  </li>


                        
                            

<li >
    <a href="../../../../v2/why-expressive/">Why choose Expressive?</a>
</li>


                        
                            

<li >
    <a href="../../../../v2/reference/cli-tooling/">CLI Tooling</a>
</li>


                        
                            

<li >
    <a href="../../../../v2/reference/usage-examples/">Examples</a>
</li>


                        
                            

<li >
    <a href="../../../../v2/reference/expressive-projects/">Expressive Projects</a>
</li>


                        
                            

  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Migration</a>
    <ul class="dropdown-menu">
        
            

<li >
    <a href="../../../../v2/reference/migration/">To version 2</a>
</li>


        
            

<li >
    <a href="../../../../v2/reference/migration-to-v2-2/">To version 2.2</a>
</li>


        
    </ul>
  </li>


                        
                        </ul>
                    </li>
                
                
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">v1 <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            

<li >
    <a href="../../../../v1/">Home</a>
</li>


                        
                            

  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Getting Started</a>
    <ul class="dropdown-menu">
        
            

<li >
    <a href="../../../../v1/getting-started/features/">Overview and Features</a>
</li>


        
            

<li >
    <a href="../../../../v1/getting-started/standalone/">Quick Start: Standalone</a>
</li>


        
            

<li >
    <a href="../../../../v1/getting-started/skeleton/">Quick Start: Skeleton Installer</a>
</li>


        
    </ul>
  </li>


                        
                            

  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Features</a>
    <ul class="dropdown-menu">
        
            

<li >
    <a href="../../../../v1/features/application/">Applications</a>
</li>


        
            

  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Containers</a>
    <ul class="dropdown-menu">
        
            

<li >
    <a href="../../../../v1/features/container/intro/">Introduction</a>
</li>


        
            

<li >
    <a href="../../../../v1/features/container/factories/">Container Factories</a>
</li>


        
            

<li >
    <a href="../../../../v1/features/container/zend-servicemanager/">Using zend-servicemanager</a>
</li>


        
            

<li >
    <a href="../../../../v1/features/container/pimple/">Using Pimple</a>
</li>


        
            

<li >
    <a href="../../../../v1/features/container/aura-di/">Using Aura.Di</a>
</li>


        
    </ul>
  </li>


        
            

  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Routing Adapters</a>
    <ul class="dropdown-menu">
        
            

<li >
    <a href="../../../../v1/features/router/intro/">Introduction</a>
</li>


        
            

<li >
    <a href="../../../../v1/features/router/interface/">Routing Interface</a>
</li>


        
            

<li >
    <a href="../../../../v1/features/router/uri-generation/">URI Generation</a>
</li>


        
            

<li >
    <a href="../../../../v1/features/router/piping/">Routing vs Piping</a>
</li>


        
            

<li >
    <a href="../../../../v1/features/router/aura/">Using Aura</a>
</li>


        
            

<li >
    <a href="../../../../v1/features/router/fast-route/">Using FastRoute</a>
</li>


        
            

<li >
    <a href="../../../../v1/features/router/zf2/">Using the ZF2 Router</a>
</li>


        
    </ul>
  </li>


        
            

  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Templating</a>
    <ul class="dropdown-menu">
        
            

<li >
    <a href="../../../../v1/features/template/intro/">Introduction</a>
</li>


        
            

<li >
    <a href="../../../../v1/features/template/interface/">Template Renderer Interface</a>
</li>


        
            

<li >
    <a href="../../../../v1/features/template/middleware/">Templated Middleware</a>
</li>


        
            

<li >
    <a href="../../../../v1/features/template/plates/">Using Plates</a>
</li>


        
            

<li >
    <a href="../../../../v1/features/template/twig/">Using Twig</a>
</li>


        
            

<li >
    <a href="../../../../v1/features/template/zend-view/">Using zend-view</a>
</li>


        
    </ul>
  </li>


        
            

<li >
    <a href="../../../../v1/features/error-handling/">Error Handling</a>
</li>


        
            

  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Helpers</a>
    <ul class="dropdown-menu">
        
            

<li >
    <a href="../../../../v1/features/helpers/intro/">Introduction</a>
</li>


        
            

<li >
    <a href="../../../../v1/features/helpers/url-helper/">UrlHelper</a>
</li>


        
            

<li >
    <a href="../../../../v1/features/helpers/server-url-helper/">ServerUrlHelper</a>
</li>


        
            

<li >
    <a href="../../../../v1/features/helpers/body-parse/">Body Parsing Middleware</a>
</li>


        
    </ul>
  </li>


        
            

<li >
    <a href="../../../../v1/features/emitters/">Emitters</a>
</li>


        
    </ul>
  </li>


                        
                            

  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Cookbook</a>
    <ul class="dropdown-menu">
        
            

<li >
    <a href="../../../../v1/cookbook/common-prefix-for-routes/">Prepending a common path to all routes</a>
</li>


        
            

<li >
    <a href="../../../../v1/cookbook/route-specific-pipeline/">Route-specific middleware pipelines</a>
</li>


        
            

<li >
    <a href="../../../../v1/cookbook/custom-404-page-handling/">Setting custom 404 page handling</a>
</li>


        
            

<li >
    <a href="../../../../v1/cookbook/using-custom-view-helpers/">Registering custom view helpers when using zend-view</a>
</li>


        
            

<li >
    <a href="../../../../v1/cookbook/using-zend-form-view-helpers/">Using zend-form view helpers</a>
</li>


        
            

<li >
    <a href="../../../../v1/cookbook/using-a-base-path/">Using Expressive from a subdirectory</a>
</li>


        
            

<li >
    <a href="../../../../v1/cookbook/modular-layout/">Building modular applications</a>
</li>


        
            

<li >
    <a href="../../../../v1/cookbook/setting-locale-depending-routing-parameter/">Setting a locale based on a routing parameter</a>
</li>


        
            

<li >
    <a href="../../../../v1/cookbook/setting-locale-without-routing-parameter/">Setting a locale without a routing parameter</a>
</li>


        
            

<li >
    <a href="../../../../v1/cookbook/debug-toolbars/">Enabling debug toolbars</a>
</li>


        
            

<li >
    <a href="../../../../v1/cookbook/using-routed-middleware-class-as-controller/">Handling multiple routes in a single class</a>
</li>


        
            

<li >
    <a href="../../../../v1/cookbook/flash-messengers/">Flash Messengers</a>
</li>


        
    </ul>
  </li>


                        
                            

  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Reference</a>
    <ul class="dropdown-menu">
        
            

<li >
    <a href="../../../../v1/why-expressive/">Why choose Expressive?</a>
</li>


        
            

<li >
    <a href="../../../../v1/reference/usage-examples/">Examples</a>
</li>


        
            

<li >
    <a href="../../../../v1/reference/expressive-projects/">Expressive Projects</a>
</li>


        
            

  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Migration</a>
    <ul class="dropdown-menu">
        
            

<li >
    <a href="../../../../v1/reference/migration/rc-to-v1/">From RC5 and Earlier</a>
</li>


        
            

<li >
    <a href="../../../../v1/reference/migration/to-v1-1/">To Expressive 1.1</a>
</li>


        
    </ul>
  </li>


        
    </ul>
  </li>


                        
                        </ul>
                    </li>
                
                
                
                
                
                </ul>
            

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" class="component-toggle" data-toggle="tooltip" data-placement="bottom" title="Show component list">
                        <i class="fa fa-book"></i> Components
                    </a>
                </li>

                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                
                    <li>
                        <a href="https://github.com/zendframework/zend-expressive/">
                            
                                <i class="fa fa-github"></i>
                            
                            GitHub
                        </a>
                    </li>
                
            </ul>
        </div>
    </div>
</div>

    <!-- content:begin -->
    <div id="page-top" class="container docs">
        
        <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#container-configuration">Container configuration</a></li>
        
            <li><a href="#the-format">The format</a></li>
        
            <li><a href="#services">Services</a></li>
        
            <li><a href="#aliases">Aliases</a></li>
        
            <li><a href="#factories">Factories</a></li>
        
            <li><a href="#invokables">Invokables</a></li>
        
            <li><a href="#delegator-factories">Delegator Factories</a></li>
        
            <li><a href="#other-capabilities">Other capabilities</a></li>
        
    
    </ul>

    
    <ul class="pager hidden-print">
      <li class="previous">
        <a rel="prev" href="../aura-di/"><i class="fa fa-arrow-left"></i> Previous</a>
      </li>
      <li class="next">
        <a rel="next" href="../../router/intro/">Next <i class="fa fa-arrow-right"></i></a>
      </li>
    </ul>
    
</div></div>
        <div class="col-md-9" role="main">

<ol class="breadcrumb" role="navigation" aria-label="breadcrumbs navigation">
  <li><a href="../../../..">Expressive</a></li>
  
    
      
        <li>Features</li>
      
    
      
        <li>Containers</li>
      
    
  
  <li class="active">Container configuration</li>
</ol>

<h1 id="container-configuration">Container configuration</h1>
<blockquote>
<p>This chapter is primarily written for container providers, so that they know
what configuration features must be compatible, and what compatibility
ultimately means within the project.</p>
</blockquote>
<p><a href="https://www.php-fig.org/psr/psr-11/">PSR-11</a> defines an interface for
dependency injection containers, and that interface is geared towards
<em>consumption</em> of the container &mdash; not <em>population</em> of it.</p>
<p>Expressive <em>consumes</em> a PSR-11 container, but also provides <em>configuration</em> for
a container: it defines what services it needs, and how to create them.</p>
<p>As such, any container consumed by Expressive must also understand its
configuration format, and deliver consistent understanding of that format when
providing services based on it.</p>
<p>This document describes the configuration format, and details expectations for
implementations.</p>
<h2 id="the-format">The format</h2>
<p>Container configuration is provided within the <code>dependencies</code> key of
configuration. That key is structured as follows:</p>
<pre class="codehilite"><code class="language-php">return [
    'dependencies' =&gt; [
        'services' =&gt; [
            // name =&gt; instance pairs
            'config' =&gt; $config,
        ],
        'aliases' =&gt; [
            // alias =&gt; target pairs
            'page-handler' =&gt; SomePageHandler::class,
        ],
        'factories' =&gt; [
            // service =&gt; factory pairs
            SomePageHandler::class =&gt; SomePageHandlerFactory::class,
        ],
        'invokables' =&gt; [
            // service =&gt; instantiable class pairs
            SomeInstantiableClass::class =&gt; SomeInstantiableClass::class,
            'an-alias-for' =&gt; SomeInstantiableClass::class,
        ],
        'delegators' =&gt; [
            // service =&gt; array of delegator factory pairs
            SomeInstantiableClass::class =&gt; [
                InjectListenersDelegator::class,
                InjectLoggerDelegator::class,
            ],
        ],
    ],
];</code></pre>

<h2 id="services">Services</h2>
<p><em>Services</em> are actual instances you want to retrieve later from the container.
These are generally provided at initial creation; the <code>config</code> service is
populated in this way.</p>
<p>When retrieving a service mapped in this way, you will always receive the
initial instance.</p>
<h2 id="aliases">Aliases</h2>
<p><em>Aliases</em> map a service <em>alias</em> to another service, and are provided as
key/value pairs. As an example:</p>
<pre class="codehilite"><code class="language-php">'aliases' =&gt; [
    'Zend\Expressive\Delegate\DefaultDelegate' =&gt; \Zend\Expressive\Handler\NotFoundHandler::class,
],</code></pre>

<p>In this case, if the service named "Zend\Expressive\Delegate\DefaultDelegate"
is requested, the container should resolve that to the service
<code>Zend\Expressive\Handler\NotFoundHandler</code> and return that instead.</p>
<p>Aliases may reference any other service defined in the container. These include
services defined under the keys:</p>
<ul>
<li><code>services</code></li>
<li><code>factories</code></li>
<li><code>invokables</code></li>
<li>or even other <code>aliases</code></li>
</ul>
<p>When returning an aliased service, the container MUST return the same instance
as if the target service were retrieved. When aliases may reference other
aliases, the rule applies to the final resolved service, and not any
intermediary aliases.</p>
<h2 id="factories">Factories</h2>
<p><em>Factories</em> map a service name to the factory capable of producing the instance.</p>
<p>A <em>factory</em> is any PHP callable capable of producing the instance:</p>
<ul>
<li>Function names</li>
<li>Closures</li>
<li>Class instances that define the method <code>__invoke()</code></li>
<li>Callable references to static methods</li>
<li>Array callables referencing static or instance methods</li>
</ul>
<p>They may also be the <em>class name</em> of a directly instantiable class (no
constructor arguments) that defines <code>__invoke()</code>. Generally, this latter
convention is used, as class names are serializable, while closures, objects,
and array callables often are not.</p>
<p>Factories are guaranteed to receive the PSR-11 container as an argument,
allowing you to pull other services from the container as necessary to fulfill
dependencies of the class being created and returned. Additionally, containers
SHOULD pass the service name requested as the second argument; factories can
determine whether that argument is necessary.</p>
<p>A typical factory will generally ignore the second argument:</p>
<pre class="codehilite"><code class="language-php">use Psr\Container\ContainerInterface;
use Zend\Expressive\Template\TemplateRendererInterface;

class SomePageHandlerFactory
{
    public function __invoke(ContainerInterface $container)
    {
        return new SomePageHandler(
            $container-&gt;get(TemplateRendererInterface::class)
        );
    }
}</code></pre>

<p>You can, however, re-use a factory for multiple services by accepting the second
argument and varying creation based on it:</p>
<pre class="codehilite"><code class="language-php">use Psr\Container\ContainerInterface;
use Zend\Expressive\Template\TemplateRendererInterface;

class PageFactory
{
    public function __invoke(ContainerInterface $container, string $serviceName)
    {
        $name = strtolower($serviceName);
        return new PageHandler(
            $container-&gt;get(TemplateRendererInterface::class),
            $name
        );
    };
}</code></pre>

<p>The above could be mapped for several services:</p>
<pre class="codehilite"><code class="language-php">return [
    'dependencies' =&gt; [
        'factories' =&gt; [
            'hello-world' =&gt; PageFactory::class,
            'about'       =&gt; PageFactory::class,
        ],
    ],
];</code></pre>

<p>In general, services should be cached by the container after initial creation;
factories should only be called once for any given service name.</p>
<h2 id="invokables">Invokables</h2>
<p><em>Invokables</em> refer to any class that may be instantiated without any constructor
arguments. In other words, one should be able to create an instance solely be
calling <code>new $className()</code>.</p>
<p>Configuration for invokables looks verbose; it's a map of the service name to
the class name to instantiate, and, generally, these are the same values.</p>
<p>However, you can <em>also</em> provide a different service name. In those situations,
containers MUST treat the service name as an alias to the final class name, and
allow retrieving the service by EITHER the alias OR the class name.</p>
<p>As an example, given the following configuration:</p>
<pre class="codehilite"><code class="language-php">'dependencies' =&gt; [
    'invokables' =&gt; [
        'HelloWorld' =&gt; PageAction::class,
    ],
],</code></pre>

<p>the container should allow retrieval of both the services "HelloWorld" as well
as the "PageAction" class.</p>
<h2 id="delegator-factories">Delegator Factories</h2>
<p>Delegator factories are factories that may be used to <em>decorate</em> or <em>manipulate</em>
a service before returning it from the container. They are covered in detail <a href="../delegator-factories/">in
another chapter</a>, and delegator factories have the
following signature:</p>
<pre class="codehilite"><code class="language-php">use Psr\Container\ContainerInterface;

function (
    ContainerInterface $container,
    string $serviceName,
    callable $callback
)</code></pre>

<p>Configuration for delegator factories is using the "delegators" sub-key of the
"dependencies" configuration. Each entry is a service name pointing to an
<em>array</em> of delegator factories.</p>
<p>Delegator factories are called in the order they appear in configuration. For
the first delegator factory, the <code>$callback</code> argument will be essentially the
return value of <code>$container-&gt;get()</code> for the given service <em>if there were no
delegator factories attached to it</em>; in other words, it would be the
<a href="#services">service</a>, <a href="#invokables">invokable</a>, or service returned by a
<a href="#factories">factory</a>, after <a href="#aliases">alias</a> resolution.</p>
<p>Each delegator then returns a value, and that value will be what <code>$callback</code>
returns for the next delegator. If the delegator is the last in the list, then
what it returns becomes the final value for the service in the container;
subsequent calls to <code>$container-&gt;get()</code> for that service will return that value.
Delegators MUST return a value!</p>
<p>For container implementors, delegators MUST only be called when initially
creating the service, and not each time a service is retrieved.</p>
<p>Common use cases for delegators include:</p>
<ul>
<li>Decorating an instance so that it may be used in another context (e.g.,
  decorating a PHP <code>callable</code> to be used as PSR-15 middleware).</li>
<li>Injecting collaborators (e.g., adding listeners to the <code>ErrorHandler</code>).</li>
<li>Conditionally replacing an instance based on configuration (e.g., swapping
  debug-enabled middleware for production middleware).</li>
</ul>
<h2 id="other-capabilities">Other capabilities</h2>
<p>Selection of a dependency injection container should be based on capabilities
that implementation provides. This may be performance, or it may be additional
features beyond those specified here. We encourage <em>application developers</em> to
make full use of the container they select. The only caveat is that the above
features MUST be supported by implementations for compatibility purposes, and
the above are the only features <em>package providers</em> may count on when providing
container configuration.</p>
<p>Examples of how the above capabilities may be implemented include:</p>
<ul>
<li><a href="https://github.com/zendframework/zend-auradi-config">zendframework/zend-auradi-config</a></li>
<li><a href="https://github.com/zendframework/zend-auradi-config">zendframework/zend-pimple-config</a></li>
<li><a href="https://github.com/zendframework/zend-auradi-config">jsoumelidis/zend-sf-di-config</a></li>
</ul>

<hr />


<nav>
  <ul class="pager hidden-print">
    <li class="previous">
      <a rel="prev" href="../aura-di/"><i class="fa fa-arrow-left"></i> Previous</a>
    </li>
    <li class="next">
      <a rel="next" href="../../router/intro/">Next <i class="fa fa-arrow-right"></i></a>
    </li>
  </ul>
</nav>
</div>
        
    </div>
    <!-- content:end -->

    <div id="footerwrap">
    <div class="container">
        <div class="row site-map">
            <div class="col-lg-3">
              <p>
                <strong>Zend Framework</strong><br />
                <a href="https://framework.zend.com/">framework.zend.com</a><br />
                <a href="https://docs.zendframework.com">docs.zendframework.com</a><br />
                <a href="https://packages.zendframework.com">packages.zendframework.com</a><br />
                <a href="https://apigility.org">apigility.org</a><br />
              </p>
            </div>
        </div>

        <div class="row">
            <div class="col-lg-12 centered">
                <a class="back-to-top" href="#page-top"><i class="fa fa-chevron-circle-up fa-4" aria-hidden="true"></i></a>
            </div>
        </div>

        <div class="spacing"></div>

        <div class="row">
            <div class="col-lg-8">
                <h4>Copyright</h4>
                <div class="hline-w"></div>

                <p>&copy; 2006-2017 by <a href="https://www.zend.com/">Zend</a>, a <a href="https://www.roguewave.com/">Rogue Wave Company</a>.</p>
            </div>

            <div class="col-lg-4">
                <h4>Contacts</h4>
                <div class="hline-w"></div>
                <p>
                    <a href="https://discourse.zendframework.com" class="btn-social btn-outline" alt="Forum" title="Forum"><i class="fa fa-comments"></i></a>
                    <a href="https://zendframework-slack.herokuapp.com" class="btn-social btn-outline" alt="Slack" title="Slack"><i class="fa fa-slack"></i></a>
                    <a href="https://github.com/zendframework" class="btn-social btn-outline" alt="Github" title="Github"><i class="fa fa-github"></i></a>
                    <a href="https://twitter.com/zfdevteam" class="btn-social btn-outline" alt="Twitter" title="Twitter"><i class="fa fa-twitter"></i></a>
                </p>
            </div>
        </div>
    </div>
</div>

    <script src="https://cdn.jsdelivr.net/npm/jquery@2.2.4/dist/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/js/bootstrap.min.js"></script>
    <script>var base_url = '../../../..';</script>
    <script src="../../../../js/scripts-0b6185f4a5.js"></script>
    <script data-main="../../../../mkdocs/js/search.js" src="../../../../mkdocs/js/require.js"></script>
        <script src="../../../../search/require.js"></script>
        <script src="../../../../search/search.js"></script>

    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <span aria-hidden="true">&times;</span>
                        <span class="sr-only">Close</span>
                    </button>
                    <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                </div>
                <div class="modal-body">
                    <p>
                        From here you can search these documents. Enter your search terms below.
                    </p>
                    <form role="form">
                        <div class="form-group">
                            <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                        </div>
                    </form>
                    <div id="mkdocs-search-results"></div>
                </div>
                <div class="modal-footer">
                </div>
            </div>
        </div>
    </div>

    <div class="zf-components">
  <div class="zf-components-grid">
    <div class="zf-logo">
      <a href="https://framework.zend.com" data-toggle="tooltip" data-placement="bottom" title="Go to the ZF homepage"><img src="../../../../img/zf-logo-mark.svg" alt="Zend Framework" width="250" /></a>
    </div>

    <div class="component-list"></div>

    <p class="zf-components-rollup"><a href="#">Hide list</a></p>
  </div>
</div>

</body>


</html>
